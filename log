/Users/shifu/go/src/redis-operator/bin/controller-gen object:headerFile="hack/boilerplate.go.txt" paths="./..."
go fmt ./...
go vet ./...
/Users/shifu/go/src/redis-operator/bin/controller-gen "crd:trivialVersions=true,preserveUnknownFields=false" webhook paths="./..." output:crd:artifacts:config=config/crd/bases
go run ./main.go
2021-03-16T14:04:56.247+0800	INFO	controller-runtime.metrics	metrics server is starting to listen	{"addr": ":8080"}
2021-03-16T14:04:56.248+0800	INFO	setup	starting manager
2021-03-16T14:04:56.248+0800	INFO	controller-runtime.manager	starting metrics server	{"path": "/metrics"}
2021-03-16T14:04:56.248+0800	INFO	controller-runtime.manager.controller.redis	Starting EventSource	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "source": "kind source: /, Kind="}
2021-03-16T14:04:56.348+0800	INFO	controller-runtime.manager.controller.redis	Starting EventSource	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "source": "kind source: /, Kind="}
2021-03-16T14:04:56.452+0800	INFO	controller-runtime.manager.controller.redis	Starting Controller	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis"}
2021-03-16T14:04:56.452+0800	INFO	controller-runtime.manager.controller.redis	Starting workers	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "worker count": 1}
2021-03-16T14:04:56.452+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:56.461+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:56.486+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:56.505+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:56.522+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:56.542+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:56.565+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:56.581+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:56.603+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:56.603+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.603+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.603+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:56.603+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:56.612+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.619+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.624+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.625+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:56.631+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:56.779+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.779+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:56.779+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.779+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:56.786+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:56.799+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:56.818+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:56.832+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:56.854+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:56.901+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:56.923+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:56.944+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:56.944+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.944+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:56.944+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:56.944+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:56.948+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.955+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.962+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:56.962+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:56.968+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:57.098+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.098+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:57.098+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.099+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:57.104+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:57.126+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:57.137+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:57.151+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:57.169+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:57.183+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.196+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.217+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:57.217+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.217+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.217+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:57.217+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:57.222+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.229+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.234+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.234+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:57.240+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:57.361+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.361+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:57.361+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.361+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:57.368+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:57.379+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:57.390+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:57.403+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:57.417+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:57.429+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.443+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.461+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:57.461+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.461+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.461+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:57.462+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:57.468+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.473+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.479+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.479+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:57.485+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:57.621+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.621+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:57.621+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.621+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:57.626+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:57.638+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:57.650+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:57.664+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:57.676+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:57.691+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.704+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:57.724+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:57.724+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.724+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.724+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:57.724+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:57.729+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.736+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.741+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:57.741+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:57.746+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:57.900+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.900+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:57.900+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:57.900+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:57.906+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:57.917+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:57.929+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:57.964+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:57.978+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:57.994+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.008+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.025+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:58.025+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.025+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.025+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:58.025+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:58.031+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.038+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.043+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.043+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:58.048+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:58.196+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.196+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:58.196+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.196+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:58.202+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:58.216+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:58.231+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:58.246+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:58.258+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:58.269+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.281+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.298+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:58.298+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.298+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.298+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:58.298+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:58.303+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.309+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.314+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.314+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:58.319+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:58.491+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.491+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:58.491+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.491+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:58.496+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:58.507+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:58.518+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:58.532+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:58.548+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:58.563+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.579+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.599+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:58.599+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.599+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.599+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:58.599+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:58.605+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.613+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.619+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.619+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:58.626+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:58.805+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.805+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:58.805+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.805+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:58.810+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:58.821+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:58.840+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:58.853+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:58.865+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:58.877+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.890+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:58.915+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:58.915+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.915+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:58.915+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:58.915+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:58.921+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.928+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.936+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:58.936+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:58.942+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:59.077+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:59.077+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:59.077+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:59.078+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:04:59.083+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:04:59.094+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:04:59.105+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:04:59.118+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:04:59.131+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:04:59.148+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:59.161+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:04:59.184+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:04:59.184+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:59.184+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:59.184+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:04:59.184+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:04:59.189+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:04:59.198+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:04:59.203+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:04:59.203+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:04:59.209+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:04:59.337+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:04:59.337+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:04:59.337+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.361+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:00.369+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:00.382+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:00.396+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:00.409+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:00.427+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:00.444+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:00.459+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:00.478+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:00.478+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.479+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.479+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:00.479+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:00.485+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.491+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.497+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.497+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:00.502+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:00.642+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.642+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:00.642+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.642+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:00.647+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:00.658+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:00.673+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:00.688+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:00.700+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:00.715+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:00.728+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:00.747+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:00.747+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.747+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.747+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:00.747+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:00.762+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.767+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.773+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:00.773+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:00.778+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:00.932+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.932+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:00.932+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:00.932+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:00.938+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:00.950+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:00.962+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:00.977+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:00.992+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:01.005+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:01.019+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:01.043+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:01.043+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:01.043+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:01.043+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:01.043+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:01.050+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:01.056+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:01.062+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:01.062+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:01.068+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:01.190+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:01.191+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:01.191+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:05.763+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:05.773+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:05.790+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:05.806+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:05.821+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:05.834+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:05.847+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:05.859+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:05.877+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:05.877+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:05.877+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:05.877+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:05.877+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:05.883+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:05.889+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:05.895+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:05.895+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:05.901+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:06.023+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:06.023+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:06.023+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:06.023+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:06.028+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:06.039+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:06.064+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:06.076+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:06.089+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:06.106+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:06.121+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:06.140+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:06.140+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:06.140+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:06.140+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:06.140+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:06.145+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:06.150+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:06.156+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:06.156+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:06.161+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:06.277+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:06.277+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:06.277+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:46.985+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:46.992+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:47.005+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:47.018+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:47.033+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:47.046+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:47.059+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:47.071+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:47.090+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:47.090+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.090+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.090+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:47.090+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:47.097+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.103+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.109+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.109+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:47.115+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:47.255+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.256+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:47.256+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.256+0800	INFO	controllers.Redis	Reconciling Opstree Redis controller	{"Request.Namespace": "default", "Request.Name": "test-redis"}
2021-03-16T14:05:47.261+0800	INFO	controller_redis	Reconciling secret for redis	{"Request.Namespace": "default", "Request.Name": "test-redis", "Secret.Name": "test-redis"}
2021-03-16T14:05:47.273+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Setup.Type": "master"}
############
2021-03-16T14:05:47.287+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
============
2021-03-16T14:05:47.300+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-master", "Service.Type": "master"}
2021-03-16T14:05:47.312+0800	INFO	controller_redis	Reconciling redis setup	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Setup.Type": "slave"}
2021-03-16T14:05:47.325+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:47.338+0800	INFO	controller_redis	Reconciling redis service	{"Request.Namespace": "default", "Request.Name": "test-redis", "Redis.Name": "test-redis-slave", "Service.Type": "slave"}
2021-03-16T14:05:47.355+0800	INFO	controllers.Redis	Creating redis cluster by executing cluster creation command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Ready.Replicas": "3"}
######## CheckRedisCluster cmd:  cluster nodes: 
2021-03-16T14:05:47.355+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:139
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.355+0800	ERROR	controller_redis	Redis command failed with this error	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "dial tcp 127.0.0.1:6379: connect: connection refused"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.CheckRedisCluster
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:144
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:120
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.355+0800	INFO	controller_redis	Redis cluster nodes are listed	{"Request.Namespace": "default", "Request.Name": "test-redis", "Output": ""}
2021-03-16T14:05:47.355+0800	INFO	controller_redis	Total number of redis nodes are	{"Request.Namespace": "default", "Request.Name": "test-redis", "Nodes": "0"}
2021-03-16T14:05:47.361+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-0", "ip": "172.17.0.2", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.368+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-1", "ip": "172.17.0.10", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.373+0800	INFO	controller_redis	Successfully got the ip for redis	{"Request.Namespace": "default", "Request.PodName": "test-redis-master-2", "ip": "172.17.0.15", "hostIp": "192.168.64.2"}
2021-03-16T14:05:47.373+0800	INFO	controller_redis	Redis cluster creation command is	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"]}
2021-03-16T14:05:47.378+0800	INFO	controller_redis	Pod Counted successfully	{"Request.Namespace": "default", "Request.Name": "test-redis", "Count": 0, "Container Name": "test-redis-master"}
2021-03-16T14:05:47.520+0800	ERROR	controller_redis	Could not execute command	{"Request.Namespace": "default", "Request.Name": "test-redis", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
redis-operator/k8sutils.ExecuteCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:211
redis-operator/k8sutils.ExecuteRedisClusterCommand
	/Users/shifu/go/src/redis-operator/k8sutils/redis.go:58
redis-operator/controllers.(*RedisReconciler).Reconcile
	/Users/shifu/go/src/redis-operator/controllers/redis_controller.go:122
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:263
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:05:47.520+0800	INFO	controller_redis	Successfully executed the command	{"Request.Namespace": "default", "Request.Name": "test-redis", "Command": ["redis-cli", "--cluster", "create", "172.17.0.2:6379", "172.17.0.10:6379", "172.17.0.15:6379", "--cluster-yes", "-a", "Opstree@1234"], "Output": "[ERR] Node 172.17.0.2:6379 is not empty. Either the node already knows other nodes (check with CLUSTER NODES) or contains some key in database 0.\n"}
2021-03-16T14:05:47.520+0800	ERROR	controller-runtime.manager.controller.redis	Reconciler error	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis", "name": "test-redis", "namespace": "default", "error": "command terminated with exit code 1"}
github.com/go-logr/zapr.(*zapLogger).Error
	/Users/shifu/go/src/redis-operator/vendor/github.com/go-logr/zapr/zapr.go:132
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).reconcileHandler
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:267
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).processNextWorkItem
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:235
sigs.k8s.io/controller-runtime/pkg/internal/controller.(*Controller).Start.func1.1
	/Users/shifu/go/src/redis-operator/vendor/sigs.k8s.io/controller-runtime/pkg/internal/controller/controller.go:198
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.BackoffUntil.func1
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:155
k8s.io/apimachinery/pkg/util/wait.BackoffUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:156
k8s.io/apimachinery/pkg/util/wait.JitterUntil
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133
k8s.io/apimachinery/pkg/util/wait.JitterUntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:185
k8s.io/apimachinery/pkg/util/wait.UntilWithContext
	/Users/shifu/go/src/redis-operator/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:99
2021-03-16T14:07:11.955+0800	INFO	controller-runtime.manager.controller.redis	Stopping workers	{"reconciler group": "db.secyu.com", "reconciler kind": "Redis"}
make: *** [run] Error 1
